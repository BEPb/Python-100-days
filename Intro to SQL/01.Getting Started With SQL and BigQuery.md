# Getting Started With SQL and BigQuery
### Введение
Язык структурированных запросов, или SQL, — это язык программирования, используемый с базами данных, и это важный 
навык для любого специалиста по данным. В этом курсе вы улучшите свои навыки работы с SQL с помощью BigQuery, 
веб-службы, которая позволяет применять SQL к огромным наборам данных.  

На этом уроке вы изучите основы доступа и изучения наборов данных BigQuery. После того, как вы освоите эти основы, 
мы вернемся, чтобы развить ваши навыки SQL. 

### Ваши первые команды BigQuery
Чтобы использовать BigQuery, мы импортируем пакет Python ниже:
```python
from google.cloud import bigquery
```

Первым шагом рабочего процесса является создание объекта Client. Как вы скоро увидите, этот объект Client будет 
играть центральную роль в извлечении информации из наборов данных BigQuery. 

```python
# Create a "Client" object
client = bigquery.Client()
```
Мы будем работать с набором данных сообщений на Hacker News, веб-сайте, посвященном новостям в области информатики и 
кибербезопасности. 

В BigQuery каждый набор данных содержится в соответствующем проекте. В этом случае наш набор данных hacker_news 
содержится в проекте bigquery-public-data. Чтобы получить доступ к набору данных, 

Мы начинаем с создания ссылки на набор данных с помощью метода dataset().
Затем мы используем метод get_dataset() вместе с только что созданной ссылкой для получения набора данных.
```python
# Construct a reference to the "hacker_news" dataset
dataset_ref = client.dataset("hacker_news", project="bigquery-public-data")

# API request - fetch the dataset
dataset = client.get_dataset(dataset_ref)
```
Каждый набор данных — это просто набор таблиц. Вы можете думать о наборе данных как о файле электронной таблицы, 
содержащем несколько таблиц, состоящих из строк и столбцов. 

Мы используем метод list_tables() для вывода списка таблиц в наборе данных.
```python
# List all the tables in the "hacker_news" dataset
tables = list(client.list_tables(dataset))

# Print names of all tables in the dataset (there are four!)
for table in tables:  
    print(table.table_id)
```
Подобно тому, как мы получили набор данных, мы можем получить таблицу. В ячейке кода ниже мы получаем полную таблицу 
из набора данных hacker_news. 
```python
# Construct a reference to the "full" table
table_ref = dataset_ref.table("full")

# API request - fetch the table
table = client.get_table(table_ref)
```

### Схема таблицы
Структура таблицы называется ее схемой. Нам нужно понимать схему таблицы, чтобы эффективно извлекать нужные данные.

В этом примере мы исследуем полную таблицу, полученную выше.
```python
# Print information on all the columns in the "full" table in the "hacker_news" dataset
table.schema
```
Каждое поле SchemaField сообщает нам об определенном столбце (который мы также называем полем). По порядку информация:

- Имя столбца
- Тип поля (или тип данных) в столбце
- Режим столбца («NULLABLE» означает, что столбец допускает значения NULL и является значением по умолчанию)
- Описание данных в этом столбце


Первое поле имеет SchemaField:

SchemaField('by', 'string', 'NULLABLE', "Имя пользователя автора элемента.",())

Это говорит нам:

- поле (или столбец) вызывается,
-данные в этом поле являются строками,
- Допускаются значения NULL, и
- он содержит имена пользователей, соответствующие автору каждого элемента.


Мы можем использовать метод list_rows(), чтобы проверить только первые пять строк полной таблицы, чтобы убедиться, 
что это правильно. (Иногда в базах данных есть устаревшие описания, поэтому полезно проверить.) Это возвращает 
объект BigQuery RowIterator, который можно быстро преобразовать в кадр данных pandas с помощью метода to_dataframe().   

```python
# Preview the first five lines of the "full" table
client.list_rows(table, max_results=5).to_dataframe()
```
Метод list_rows() также позволяет нам просматривать информацию только в определенном столбце. Например, если мы 
хотим увидеть первые пять записей в столбце по, мы можем это сделать! 

```python
# Preview the first five entries in the "by" column of the "full" table
client.list_rows(table, selected_fields=table.schema[:1], max_results=5).to_dataframe()
```

### Отказ от ответственности
Прежде чем мы перейдем к упражнениям по кодированию, небольшое заявление для тех, кто уже немного знаком с SQL:

Каждый пользователь Kaggle может бесплатно сканировать 5 ТБ каждые 30 дней. Как только вы достигнете этого предела, 
вам придется дождаться его сброса. 

Команды, которые вы видели до сих пор, не требуют существенной части этого ограничения. Но некоторые наборы данных 
BiqQuery огромны. Итак, если вы уже знаете SQL, отложите выполнение запросов SELECT до тех пор, пока не увидите, как 
эффективно использовать свое выделение. Если вы похожи на большинство людей, читающих это, вы еще не знаете, как писать эти запросы, поэтому вам не нужно беспокоиться об этом отказе от ответственности.   








