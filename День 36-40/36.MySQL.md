## Обзор реляционных баз данных и MySQL

### Обзор реляционных баз данных

1. Сохранение данных - сохраните данные на носителе, который может сохранять данные в течение длительного времени, и 
   данные не будут потеряны в случае сбоя питания. 

2. База данных истории разработки базы данных, иерархическая база данных, реляционная база данных, база данных NoSQL,
   база данных NewSQL. 

   > В 1970 году исследователи IBM EFCodd в сообщении ACM о публикации, озаглавленной «Данные для больших общих 
   > банков данных», в статьях, предложили концепцию реляционной модели, заложили теоретическую основу для 
   > реляционной модели. Позже Код опубликовал несколько статей подряд, обсуждая теорию парадигм и 12 стандартов 
   > измерения реляционных систем, а также использовал математические теории, чтобы заложить основу для реляционных 
   > баз данных. 
   
3. Характеристики реляционной базы данных.

   - Теоретическая основа: реляционная алгебра (реляционные операции, теория множеств, логика предикатов первого порядка).
   
   - Конкретный вид: используйте двумерные таблицы (со строками и столбцами) для организации данных.

   - Язык программирования: язык структурированных запросов (SQL).

4. ER-модель (Entity Relationship Model) и диаграмма концептуальной модели.

   ER-модель , называемая моделью сущности-отношения (Entity-Relationship Model), предложенная китайско-американским 
   компьютерным ученым г-ном Питером Ченом, представляет собой концептуальную модель данных высокого уровня, описывающую путь 
   - Сущность-прямоугольная коробка
   - Свойства-Овальная коробка
   - Отношения-Бриллиантовая Коробка
   - Кратность-1: 1 (один к одному) / 1: N (один ко многим) / M: N (многие ко многим)

   При фактической разработке проекта мы можем использовать инструменты моделирования баз данных (такие как: 
   PowerDesigner), чтобы нарисовать концептуальную модель данных (ее суть - модель ER), а затем настроить целевую 
   систему базы данных, преобразовать концептуальную модель в физическую модель. и, наконец, создать вторую таблицу 
   измерений SQL (многие инструменты могут экспортировать SQL или напрямую генерировать таблицы данных в 
   соответствии с разработанной нами схемой физической модели и установленной целевой базой данных). 

5. Продукты реляционных баз данных.
   - [Oracle](https://www.oracle.com/index.html) - в настоящее время наиболее широко используемая система управления 
     базами данных в мире. Как общая система баз данных, она имеет полные функции управления данными; как 
     реляционная база данных, это полный реляционный продукт; как распределенная база данных, она реализует функцию 
     обработки типов распределения. В последней версии Oracle 12c также была представлена ​​мультитенантная 
     архитектура, которую можно использовать для простого развертывания облаков баз данных и управления ими.    - 
     [DB2](https://www.ibm.com/analytics/us/en/db2/) - продукт реляционной базы данных, разработанный IBM, в 
     основном работающий в версиях для серверов Unix (включая собственный AIX IBM ), Linux и Windows. DB2 имеет 
     долгую историю и считается первым продуктом баз данных, использующим SQL, и обладает относительно мощной 
     функцией бизнес-аналитики.
   - [SQL Server](https://www.microsoft.com/en-us/sql-server/) - продукт для реляционных баз данных, разработанный и 
     продвигаемый Microsoft. Первоначально он подходил для управления данными на малых и средних предприятиях, но в 
     последние годы его область применения расширилась. Некоторые крупные предприятия и даже транснациональные 
     компании начали создавать свои собственные данные на его основе.    
   - [MySQL](https://www.mysql.com/) - MySQL имеет открытый исходный код, любой может загрузить его по лицензии GPL 
     (General Public License) и изменить в соответствии с индивидуальными потребностями. MySQL привлек большое 
     внимание своей скоростью, надежностью и адаптируемостью.    
   - [PostgreSQL]() - реляционная база данных с открытым исходным кодом, выпущенная под лицензией BSD.

### MВведение в MySQL

MИзначально MySQL была системой управления реляционными базами данных с открытым исходным кодом, разработанной 
шведской компанией MySQL AB, которая была приобретена Sun Microsystems в 2008 году. В 2009 году Oracle приобрела 
Sun Microsystems, поэтому MySQL в настоящее время является продуктом Oracle.

MySQL стал самой популярной базой данных с открытым исходным кодом в прошлом из-за своей высокой производительности,
низкой стоимости и хорошей надежности, поэтому он широко использовался при разработке небольших и средних 
веб-сайтов. По мере того, как MySQL продолжает развиваться, он постепенно применяется к более крупномасштабным 
веб-сайтам и приложениям. Например, Wikipedia, Google, Facebook, Taobao и другие веб-сайты используют MySQL для 
предоставления услуг сохранения данных.

После приобретения Oracle Sun Microsystems существенно повысила стоимость коммерческой версии MySQL, и Oracle больше 
не поддерживает разработку другого проекта бесплатного программного обеспечения, OpenSolaris , что привело 
сообщество свободного программного обеспечения к вопросу о том, будет ли Oracle продолжать поддерживать MySQL 
Community Edition (The Единственная бесплатная версия среди различных выпусков MySQL) вызывает опасения.Основатель 
MySQL Майкл Видниус создал ветвь MariaDB (база данных, названная в честь его дочери) на основе MySQL . Многие 
компании, которые изначально использовали базы данных MySQL (например, Википедия), успешно завершили миграцию с баз 
данных MySQL на базы данных MariaDB. 
### Установить MySQL

#### Окружающая среда Windows

1. Загрузите установщик «MySQL Community Edition Server» по https://www.mysql.com представленной на официальном 
   веб-сайте 
   
#### Среда Linux

Давайте возьмем среду CentOS 7.x в качестве примера, чтобы продемонстрировать, как установить MySQL 5.7.x. Если вам 
нужно установить другие версии MySQL в других системах Linux, пожалуйста, найдите соответствующие руководства по 
установке в Интернете.  
1. Установите MySQL.

   Вы можете скачать установочный файл с официального сайта MySQL. Сначала выберите платформу и версию на странице 
загрузки, затем найдите соответствующую ссылку для загрузки, напрямую загрузите файл архива, содержащий все файлы 
установки, и установите его с помощью инструмента управления пакетами после разархивирования. 
   ```Shell
   wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
   tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar
   ```

   Если в системе есть файлы, связанные с MariaDB, вам необходимо сначала удалить файлы, связанные с MariaDB.

   ```Shell
   yum list installed | grep mariadb | awk '{print $1}' | xargs yum erase -y
   ```

   Обновите и установите базовые зависимые библиотеки, которые могут быть использованы.

   ```Bash
   yum update
   yum install -y libaio libaio-devel
   ```

   Затем вы можете установить MySQL с помощью инструмента RPM (Redhat Package Manager) в порядке, указанном ниже. 


   ```Shell
   rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm
   rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm
   rpm -ivh mysql-community-libs-compat-5.7.26-1.el7.x86_64.rpm
   rpm -ivh mysql-community-devel-5.7.26-1.el7.x86_64.rpm
   rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm
   rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm
   ```
Вы можете использовать следующую команду для просмотра установленных пакетов, связанных с MySQL.
   
   ```Shell
   rpm -qa | grep mysql
   ```

2. Настроить MySQL.

   Файл конфигурации MySQL /etc назван в каталоге, my.cnf а содержимое файла конфигурации по умолчанию показано ниже.


   ```Shell
   cat /etc/my.cnf
   ```

   ```INI
   # For advice on how to change settings please see
   # http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
   
   [mysqld]
   #
   # Remove leading # and set to the amount of RAM for the most important data
   # cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
   # innodb_buffer_pool_size = 128M
   #
   # Remove leading # to turn on a very important data integrity option: logging
   # changes to the binary log between backups.
   # log_bin
   #
   # Remove leading # to set options mainly useful for reporting servers.
   # The server defaults are faster for transactions and fast SELECTs.
   # Adjust sizes as needed, experiment to find the optimal values.
   # join_buffer_size = 128M
   # sort_buffer_size = 2M
   # read_rnd_buffer_size = 2M
   datadir=/var/lib/mysql
   socket=/var/lib/mysql/mysql.sock
   
   # Disabling symbolic-links is recommended to prevent assorted security risks
   symbolic-links=0
   
   log-error=/var/log/mysqld.log
   pid-file=/var/run/mysqld/mysqld.pid
   ```

   Через файл конфигурации мы можем изменить порт, набор символов, максимальное количество подключений, размер 
   очереди сокетов, максимальный размер пакета, расположение файла журнала, время истечения срока действия журнала и 
   другие конфигурации, используемые службой MySQL. Конечно, мы также можем выполнить настройку производительности 
   и контроль безопасности на сервере MySQL, изменив файл конфигурации.  
3. Запустите службу MySQL.

   Вы можете использовать следующую команду для запуска MySQL.

   ```Shell
   service mysqld start
   ```

   В CentOS 7 для запуска MySQL рекомендуется использовать следующую команду.

   ```Shell
   systemctl start mysqld
   ```

   После успешного запуска MySQL вы можете использовать следующую команду для проверки использования сетевого порта: 
   MySQL использует 3306порт по умолчанию. 

   ```Shell
   netstat -ntlp | grep mysql
   ```

   Вы также можете использовать следующую команду, чтобы узнать, существует ли именованный mysqld процесс.

   ```Shell
   pgrep mysqld
   ```

4. Используйте клиентский инструмент MySQL для подключения к серверу.

Инструмент командной строки:

   ```Shell
   mysql -u root -p
   ```

   > Описание: при запуске клиента -uпараметр, используемый для указания имени пользователя, учетная запись MySQL 
   > является суперуправлением по умолчанию root; -pобязано ввести пароль (пароль пользователя); если вы 
   > подключаетесь к другому хосту, а не к машине, вы можете использовать -h  хост для указания имени хоста 
   > подключения или IP-адреса.

   Если вы устанавливаете MySQL впервые, вы можете использовать следующую команду, чтобы найти начальный пароль по 
   умолчанию 

   ```Shell
   cat /var/log/mysqld.log | grep password
   ```

   Приведенная выше команда будет просматривать password строки в журнале MySQL . root@localhost: Последняя часть 
   отображаемого результата является начальным паролем, установленным по умолчанию.

После входа в  клиентский инструмент вы можете изменить пароль доступа суперадминистратора (root), выполнив следующие 
инструкции 123456. 

   ```SQL
   set global validate_password_policy=0;
   set global validate_password_length=6;
   alter user 'root'@'localhost' identified by '123456';
   ```

   > Примечание : более новая версия MySQL не позволяет использовать слабые пароли в качестве паролей пользователей 
   > по умолчанию, поэтому приведенный выше код изменяет стратегию проверки пароля и длину пароля. Фактически, мы не 
   > должны использовать слабые пароли, потому что есть риск перебора паролей пользователей. В последние годы 
   > нередки случаи нападения на базы данных с целью кражи данных и взлома баз данных с целью вымогательства 
   > биткойнов . Чтобы избежать этих потенциальных рисков, самое главное - не открывать сервер базы данных для 
   > общедоступной сети (лучше всего использовать базы данных в интрасети. По крайней мере, не открывать порт 
   > доступа сервера базы данных к общедоступной сети). Кроме того root, необходимо сохранить пароль учетной записи. 
   > Когда прикладной системе требуется доступ к базе данных, она обычно не использует rootсчет для доступа, но 
   > создает другие учетные записи с соответствующими разрешениями на доступ.         

   Когда вы снова используете клиентский инструмент для подключения к серверу MySQL, вы можете использовать только 
   что установленный пароль. В реальной разработке, чтобы облегчить пользовательские операции, для подключения к 
   серверу MySQL могут быть выбраны графические клиентские инструменты, в том числе:   
   - MySQL Workbench (официальный инструмент)
   - Navicat для MySQL (простой и удобный интерфейс)
   

#### среда macOS

Установить MySQL на macOS относительно просто. Вам нужно всего лишь загрузить установочный файл DMG с только что 
упомянутого официального сайта и запустить его. При загрузке вам необходимо выбрать ссылку для загрузки в 
зависимости от того, используете ли вы чип Intel или M1 от Apple.   

После успешной установки вы можете найти «MySQL» в «Системных настройках».


### Базовые команды MySQL

1. Просмотреть все базы данных

```SQL
show databases;
```

2. Просмотреть все наборы символов

```SQL
show character set;
```

3. Посмотреть все правила сортировки

```SQL
show collation;
```

4. Посмотреть все двигатели

```SQL
show engines;
```

5. Просмотреть все файлы журналов

```SQL
show binary logs;
```

6. Просмотреть все таблицы в базе данных

```SQL
show tables;
```

#### Получить помощь

В инструменте командной строки MySQL вы можете использовать helpкоманду или ?для получения справки, как показано ниже.

1. Просмотрите show справку по команде.

    ```MySQL
    ? show
    ```

2. Посмотрите, какой справочный контент доступен.

    ```MySQL
    ? contents
    ```

3. Получите помощь по функции.

    ```MySQL
    ? functions
    ```

4. Получите справку по типам данных.

    ```MySQL
    ? data types
    ```

#### Прочие команды

1. Подключение нового / перестроенного сервера - `connect` / `resetconnection`。

2. Очистить текущий ввод- \c. В случае ошибки ввода вы можете использовать его вовремя, чтобы \cочистить текущий ввод и начать заново.

3. Измените терминатор (разделитель) - delimiter. По умолчанию терминатор означает, ;что вы можете использовать эту 
команду для изменения других символов, например, чтобы преобразовать его в $символ, вы можете использовать 
   delimiter $команду.

4. Откройте системный редактор по умолчанию edit. После редактирования, сохранения и закрытия командная строка 
автоматически выполнит отредактированный контент.

5. Просмотр статуса сервера status.

6. Измените подсказку по умолчанию prompt.

7. Выполните системную команду - system. Системная команда может выполняться после systemкоманды, а systemтакже 
сокращаться до \!.

8. Выполнить файл SQL- source. sourceЗа командой следует путь к файлу SQL.

9. Перенаправить вывод- tee/ notee. Вы можете перенаправить вывод команды в указанный файл.

10. Переключить базу данных- use.

11. Отображение предупреждающего сообщения- warnings.

12. Выйти из командной строки - quit или exit.

    

