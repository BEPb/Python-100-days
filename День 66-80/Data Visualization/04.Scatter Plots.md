Scatter Plots
В этом руководстве вы узнаете, как создавать расширенные диаграммы рассеяния.

###Настроить ноутбук
Как всегда, мы начинаем с настройки среды кодирования. (Этот код скрыт, но вы можете отменить его, нажав кнопку «Код» сразу под этим текстом справа.)

```python
import pandas as pd
pd.plotting.register_matplotlib_converters()
import matplotlib.pyplot as plt
%matplotlib inline
import seaborn as sns
print("Setup Complete")
```
Настройка завершена

###Загрузите и изучите данные
Мы будем работать с (синтетическим) набором данных о страховых сборах, чтобы увидеть, сможем ли мы понять, почему 
 одни клиенты платят больше, чем другие.

Если хотите, вы можете узнать больше о наборе данных здесь.
```python
# Path of the file to read
# Путь к файлу для чтения
insurance_filepath = "../input/insurance.csv"

# Read the file into a variable insurance_data
# Считываем файл в переменную insurance_data
insurance_data = pd.read_csv(insurance_filepath)
```

Как всегда, мы проверяем правильность загрузки набора данных, распечатывая первые пять строк.

insurance_data.head ()
возраст пол bmi дети курильщик регион сборы
0 19 женщин 27.900 0 да юго-запад 16884.92400
1 18 самцов 33,770 1 нет юго-восток 1725,55230
2 28 мужчин 33,000 3 нет юго-восток 4449,46200
3 33 самцов 22,705 0 нет северо-запад 21984,47061
4 32 самцов 28,880 0 нет северо-запад 3866,85520

###Диаграммы разброса
Чтобы создать простой график рассеяния, мы используем команду sns.scatterplot и указываем значения для:

- горизонтальная ось абсцисс (x = данные_страхования ['bmi']), и
- вертикальная ось Y (y = данные_страхования ['сборы']).
```python
sns.scatterplot(x=insurance_data['bmi'], y=insurance_data['charges'])
```
<AxesSubplot: xlabel = 'bmi', ylabel = 'charge'>

Диаграмма рассеяния выше предполагает, что индекс массы тела (ИМТ) и расходы на страхование положительно 
коррелируют, при этом клиенты с более высоким ИМТ обычно также склонны платить больше за страхование. (Эта 
закономерность имеет смысл, поскольку высокий ИМТ обычно связан с более высоким риском хронических заболеваний.)

Чтобы дважды проверить силу этой связи, вы можете добавить линию регрессии или линию, которая лучше всего 
соответствует данным. Мы делаем это, изменяя команду на sns.regplot.

```python
sns.regplot(x=insurance_data['bmi'], y=insurance_data['charges'])
```
<AxesSubplot: xlabel = 'bmi', ylabel = 'charge'>

###Диаграммы рассеяния с цветовой кодировкой
Мы можем использовать диаграммы разброса, чтобы отображать отношения между (не двумя, а ...) тремя переменными! 
 Один из способов сделать это - обозначить точки цветом.

Например, чтобы понять, как курение влияет на взаимосвязь между ИМТ и затратами на страхование, мы можем обозначить 
 точки цветом «курильщик» и нанести два других столбца («bmi», «сборы») по осям.

```python
sns.scatterplot(x=insurance_data['bmi'], y=insurance_data['charges'], hue=insurance_data['smoker'])
```
<AxesSubplot: xlabel = 'bmi', ylabel = 'charge'>

Этот график показывает, что, хотя некурящие склонны платить немного больше с увеличением ИМТ, курильщики платят 
 НАМНОГО больше.

Чтобы еще больше подчеркнуть этот факт, мы можем использовать команду sns.lmplot, чтобы добавить две строки 
регрессии, соответствующие курильщикам и некурящим. (Вы заметите, что линия регрессии для курильщиков имеет 
гораздо более крутой наклон по сравнению с линией для некурящих!)

```python
sns.lmplot(x="bmi", y="charges", hue="smoker", data=insurance_data)
```
<seaborn.axisgrid.FacetGrid в 0x7f76accd7590>

Вышеупомянутая команда sns.lmplot работает немного иначе, чем команды, о которых вы уже узнали:

- Вместо установки x = insurance_data ['bmi'] для выбора столбца 'bmi' в insurance_data мы устанавливаем x = "bmi", 
чтобы указать только имя столбца.
- Точно так же y = "charge" и hue = "smoker" также содержат названия столбцов.
- Мы указываем набор данных с помощью data = insurance_data.

Наконец, есть еще один сюжет, о котором вы узнаете, который может немного отличаться от того, как вы привыкли 
видеть графики разброса. Обычно мы используем точечные диаграммы, чтобы выделить взаимосвязь между двумя 
непрерывными переменными (такими как «bmi» и «заряды»). Однако мы можем адаптировать схему точечной диаграммы, 
чтобы на одной из основных осей отображалась категориальная переменная (например, «курильщик»). Мы будем называть 
этот тип графика категориальным графиком рассеяния и строим его с помощью команды sns.swarmplot.

```python
sns.swarmplot(x=insurance_data['smoker'], y=insurance_data['charges'])
```
Среди прочего, этот сюжет показывает нам, что:

в среднем с некурящих платят меньше, чем с курящих, и покупатели, которые платят больше всего, - курильщики; в то 
время как наименее платящие клиенты - некурящие.